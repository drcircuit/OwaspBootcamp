<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Profile - Evil Capitalistic Corp</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üë§ Employee Profile</h1>
            <nav>
                <a href="/">üè† Home</a>
                <a href="/employees">üë• All Employees</a>
            </nav>
        </header>
        
        <main style="padding: 3rem 2rem; max-width: 800px; margin: 0 auto;">
            <div style="background: white; padding: 2.5rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <div style="border-bottom: 3px solid #ffd700; padding-bottom: 1.5rem; margin-bottom: 2rem;">
                    <h2 style="color: #1a1a2e; font-size: 2rem; margin-bottom: 0.5rem;"><%= user.username %></h2>
                    <span style="background: #ffd700; color: #1a1a2e; padding: 0.4rem 1rem; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">
                        <%= user.role.toUpperCase() %>
                    </span>
                </div>
                
                <div style="display: grid; gap: 1.5rem;">
                    <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #1a1a2e;">
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.3rem;">Employee ID</p>
                        <p style="color: #1a1a2e; font-size: 1.2rem; font-weight: 600;"><%= user.id %></p>
                    </div>
                    
                    <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #1a1a2e;">
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.3rem;">Email Address</p>
                        <p style="color: #1a1a2e; font-size: 1.2rem; font-weight: 600;"><%= user.email %></p>
                    </div>
                    
                    <% if (user.department) { %>
                    <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #1a1a2e;">
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.3rem;">Department</p>
                        <p style="color: #1a1a2e; font-size: 1.2rem; font-weight: 600;"><%= user.department %></p>
                    </div>
                    <% } %>
                    
                    <% if (user.salary) { %>
                    <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #28a745;">
                        <p style="color: #666; font-size: 0.9rem; margin-bottom: 0.3rem;">Annual Salary</p>
                        <p style="color: #28a745; font-size: 1.4rem; font-weight: 700;">$<%= user.salary.toLocaleString() %></p>
                    </div>
                    <% } %>
                    
                    <% if (user.ssn) { %>
                    <div style="padding: 1rem; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <p style="color: #856404; font-size: 0.9rem; margin-bottom: 0.3rem;">üîí Social Security Number (Confidential)</p>
                        <p style="color: #856404; font-size: 1.2rem; font-weight: 600;"><%= user.ssn %></p>
                    </div>
                    <% } %>
                    
                    <% if (user.api_key) { %>
                    <div style="padding: 1rem; background: #d1ecf1; border-radius: 8px; border-left: 4px solid #0c5460;">
                        <p style="color: #0c5460; font-size: 0.9rem; margin-bottom: 0.3rem;">üîë API Key</p>
                        <p style="color: #0c5460; font-size: 1rem; font-weight: 600; font-family: monospace;"><%= user.api_key %></p>
                    </div>
                    <% } %>
                    
                    <% if (user.notes) { %>
                    <div style="padding: 1.5rem; background: <%= user.notes.includes('NSA{') ? '#d4edda' : '#e7f3ff' %>; border-radius: 8px; border: 2px solid <%= user.notes.includes('NSA{') ? '#28a745' : '#0066cc' %>;">
                        <p style="color: <%= user.notes.includes('NSA{') ? '#155724' : '#004085' %>; font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;">üìù Notes:</p>
                        <p style="color: <%= user.notes.includes('NSA{') ? '#155724' : '#004085' %>; font-size: 1.05rem; line-height: 1.6;"><%= user.notes %></p>
                        <% if (user.notes.includes('NSA{')) { %>
                            <p style="color: #155724; font-weight: 700; margin-top: 1rem; padding-top: 1rem; border-top: 2px solid #28a745;">üè¥ FLAG CAPTURED!</p>
                        <% } %>
                    </div>
                    <% } %>
                </div>
                
                <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #f0f0f0; text-align: center;">
                    <a href="/employees" style="display: inline-block; padding: 0.75rem 2rem; background: #1a1a2e; color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
                        ‚Üê Back to Employee Directory
                    </a>
                </div>
            </div>
            
            <% if (user.role === 'admin' || user.role === 'superadmin') { %>
                <div style="background: #fff3cd; border: 2px dashed #ffc107; padding: 1.5rem; margin-top: 2rem; border-radius: 8px;">
                    <p style="color: #856404; font-weight: 600;">üí° Next Challenge:</p>
                    <p style="color: #856404;">You found the admin account! Now try to access the admin panel at <a href="/admin" style="color: #856404; font-weight: 700;">/admin</a></p>
                    <p style="color: #856404; margin-top: 0.5rem;"><strong>Hint:</strong> Check how the admin panel verifies user permissions...</p>
                </div>
            <% } %>
        </main>
    </div>
</body>
</html>
